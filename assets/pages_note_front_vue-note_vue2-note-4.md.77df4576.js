import{_ as s,o as n,c as a,e as l}from"./app.baa69c7a.js";const F=JSON.parse('{"title":"vue2配置","description":"","frontmatter":{},"headers":[],"relativePath":"pages/note/front/vue-note/vue2-note-4.md","filePath":"pages/note/front/vue-note/vue2-note-4.md","lastUpdated":1700204718000}'),p={name:"pages/note/front/vue-note/vue2-note-4.md"},o=l(`<h1 id="vue2配置" tabindex="-1">vue2配置 <a class="header-anchor" href="#vue2配置" aria-label="Permalink to &quot;vue2配置&quot;">​</a></h1><h2 id="_1-在vue脚手架配置接口" tabindex="-1">1. 在vue脚手架配置接口 <a class="header-anchor" href="#_1-在vue脚手架配置接口" aria-label="Permalink to &quot;1. 在vue脚手架配置接口&quot;">​</a></h2><ul><li>vue.config.js</li></ul><div class="language-js vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">bodyParser</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">require</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;body-parser&#39;</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">jsmd5</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">require</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;js-md5&#39;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#79B8FF;">module</span><span style="color:#E1E4E8;">.</span><span style="color:#79B8FF;">exports</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">  devServer: {</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;">// open: true,</span></span>
<span class="line"><span style="color:#E1E4E8;">    host: </span><span style="color:#9ECBFF;">&#39;localhost&#39;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">    port: </span><span style="color:#79B8FF;">8088</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">    https: </span><span style="color:#79B8FF;">false</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">    hotOnly: </span><span style="color:#79B8FF;">false</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;">/* proxy: { // 配置跨域</span></span>
<span class="line"><span style="color:#6A737D;">        &#39;/api&#39;: {</span></span>
<span class="line"><span style="color:#6A737D;">            target: &#39;http://10.10.10.199:8080&#39;,</span></span>
<span class="line"><span style="color:#6A737D;">            ws: true,  // 是否启用websockets</span></span>
<span class="line"><span style="color:#6A737D;">            changOrigin: true,  // 开启代理，在本地创建一个虚拟服务端</span></span>
<span class="line"><span style="color:#6A737D;">            pathRewrite: {</span></span>
<span class="line"><span style="color:#6A737D;">                &#39;^/api&#39;: &#39;&#39;</span></span>
<span class="line"><span style="color:#6A737D;">            }</span></span>
<span class="line"><span style="color:#6A737D;">        }</span></span>
<span class="line"><span style="color:#6A737D;">    }, */</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#B392F0;">before</span><span style="color:#E1E4E8;">: </span><span style="color:#FFAB70;">app</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#6A737D;">// post请求必须使用中间件才能接收参数</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#6A737D;">// 需要载入body-parser中间件才可以使用req.body</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#6A737D;">// 2021年body-parser已经被弃用，原因是express框架已经内置</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#6A737D;">// 但原生node还是需要中间件来做请求</span></span>
<span class="line"><span style="color:#E1E4E8;">      app.</span><span style="color:#B392F0;">use</span><span style="color:#E1E4E8;">(bodyParser.</span><span style="color:#B392F0;">json</span><span style="color:#E1E4E8;">());</span></span>
<span class="line"><span style="color:#E1E4E8;">      app.</span><span style="color:#B392F0;">use</span><span style="color:#E1E4E8;">(bodyParser.</span><span style="color:#B392F0;">urlencoded</span><span style="color:#E1E4E8;">({ extended: </span><span style="color:#79B8FF;">false</span><span style="color:#E1E4E8;"> }));</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">      app.</span><span style="color:#B392F0;">post</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;/api/admin/login&#39;</span><span style="color:#E1E4E8;">, (</span><span style="color:#FFAB70;">req</span><span style="color:#E1E4E8;">, </span><span style="color:#FFAB70;">res</span><span style="color:#E1E4E8;">)</span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#6A737D;">// console.log(req.body)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#F97583;">let</span><span style="color:#E1E4E8;"> username </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> req.body.username;</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#F97583;">let</span><span style="color:#E1E4E8;"> password </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> req.body.password;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#6A737D;">// console.log(jsmd5(&quot;admin&quot;))</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#F97583;">if</span><span style="color:#E1E4E8;">(username </span><span style="color:#F97583;">==</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;admin&quot;</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">&amp;&amp;</span><span style="color:#E1E4E8;"> password </span><span style="color:#F97583;">==</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">jsmd5</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;admin&quot;</span><span style="color:#E1E4E8;">)) {</span></span>
<span class="line"><span style="color:#E1E4E8;">          res.</span><span style="color:#B392F0;">send</span><span style="color:#E1E4E8;">({</span></span>
<span class="line"><span style="color:#E1E4E8;">            msg: </span><span style="color:#9ECBFF;">&#39;恭喜你登录成功&#39;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">            info: { id:</span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;">, name: </span><span style="color:#9ECBFF;">&quot;zhangsan&quot;</span><span style="color:#E1E4E8;">, username: </span><span style="color:#9ECBFF;">&quot;admin&quot;</span><span style="color:#E1E4E8;">, password: </span><span style="color:#9ECBFF;">&quot;admin&quot;</span><span style="color:#E1E4E8;"> },</span></span>
<span class="line"><span style="color:#E1E4E8;">            isOk: </span><span style="color:#79B8FF;">true</span></span>
<span class="line"><span style="color:#E1E4E8;">          })</span></span>
<span class="line"><span style="color:#E1E4E8;">        } </span><span style="color:#F97583;">else</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">          res.</span><span style="color:#B392F0;">send</span><span style="color:#E1E4E8;">({</span></span>
<span class="line"><span style="color:#E1E4E8;">            msg: </span><span style="color:#9ECBFF;">&#39;登录失败，请检查账号密码&#39;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">            isOk: </span><span style="color:#79B8FF;">false</span></span>
<span class="line"><span style="color:#E1E4E8;">          })</span></span>
<span class="line"><span style="color:#E1E4E8;">        }</span></span>
<span class="line"><span style="color:#E1E4E8;">      }).</span><span style="color:#B392F0;">get</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;/api/user/get&#39;</span><span style="color:#E1E4E8;">, </span><span style="color:#FFAB70;">res</span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">        res.</span><span style="color:#B392F0;">json</span><span style="color:#E1E4E8;">([</span></span>
<span class="line"><span style="color:#E1E4E8;">          { username: </span><span style="color:#9ECBFF;">&quot;zhangsan&quot;</span><span style="color:#E1E4E8;"> },</span></span>
<span class="line"><span style="color:#E1E4E8;">          { username: </span><span style="color:#9ECBFF;">&quot;王五&quot;</span><span style="color:#E1E4E8;"> },</span></span>
<span class="line"><span style="color:#E1E4E8;">        ])</span></span>
<span class="line"><span style="color:#E1E4E8;">      })</span></span>
<span class="line"><span style="color:#E1E4E8;">    }</span></span>
<span class="line"><span style="color:#E1E4E8;">  },</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">bodyParser</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">require</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&#39;body-parser&#39;</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">jsmd5</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">require</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&#39;js-md5&#39;</span><span style="color:#24292E;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#005CC5;">module</span><span style="color:#24292E;">.</span><span style="color:#005CC5;">exports</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">  devServer: {</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6A737D;">// open: true,</span></span>
<span class="line"><span style="color:#24292E;">    host: </span><span style="color:#032F62;">&#39;localhost&#39;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">    port: </span><span style="color:#005CC5;">8088</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">    https: </span><span style="color:#005CC5;">false</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">    hotOnly: </span><span style="color:#005CC5;">false</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6A737D;">/* proxy: { // 配置跨域</span></span>
<span class="line"><span style="color:#6A737D;">        &#39;/api&#39;: {</span></span>
<span class="line"><span style="color:#6A737D;">            target: &#39;http://10.10.10.199:8080&#39;,</span></span>
<span class="line"><span style="color:#6A737D;">            ws: true,  // 是否启用websockets</span></span>
<span class="line"><span style="color:#6A737D;">            changOrigin: true,  // 开启代理，在本地创建一个虚拟服务端</span></span>
<span class="line"><span style="color:#6A737D;">            pathRewrite: {</span></span>
<span class="line"><span style="color:#6A737D;">                &#39;^/api&#39;: &#39;&#39;</span></span>
<span class="line"><span style="color:#6A737D;">            }</span></span>
<span class="line"><span style="color:#6A737D;">        }</span></span>
<span class="line"><span style="color:#6A737D;">    }, */</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6F42C1;">before</span><span style="color:#24292E;">: </span><span style="color:#E36209;">app</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=&gt;</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#6A737D;">// post请求必须使用中间件才能接收参数</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#6A737D;">// 需要载入body-parser中间件才可以使用req.body</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#6A737D;">// 2021年body-parser已经被弃用，原因是express框架已经内置</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#6A737D;">// 但原生node还是需要中间件来做请求</span></span>
<span class="line"><span style="color:#24292E;">      app.</span><span style="color:#6F42C1;">use</span><span style="color:#24292E;">(bodyParser.</span><span style="color:#6F42C1;">json</span><span style="color:#24292E;">());</span></span>
<span class="line"><span style="color:#24292E;">      app.</span><span style="color:#6F42C1;">use</span><span style="color:#24292E;">(bodyParser.</span><span style="color:#6F42C1;">urlencoded</span><span style="color:#24292E;">({ extended: </span><span style="color:#005CC5;">false</span><span style="color:#24292E;"> }));</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">      app.</span><span style="color:#6F42C1;">post</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&#39;/api/admin/login&#39;</span><span style="color:#24292E;">, (</span><span style="color:#E36209;">req</span><span style="color:#24292E;">, </span><span style="color:#E36209;">res</span><span style="color:#24292E;">)</span><span style="color:#D73A49;">=&gt;</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#6A737D;">// console.log(req.body)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#D73A49;">let</span><span style="color:#24292E;"> username </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> req.body.username;</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#D73A49;">let</span><span style="color:#24292E;"> password </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> req.body.password;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#6A737D;">// console.log(jsmd5(&quot;admin&quot;))</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#D73A49;">if</span><span style="color:#24292E;">(username </span><span style="color:#D73A49;">==</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;admin&quot;</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">&amp;&amp;</span><span style="color:#24292E;"> password </span><span style="color:#D73A49;">==</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">jsmd5</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;admin&quot;</span><span style="color:#24292E;">)) {</span></span>
<span class="line"><span style="color:#24292E;">          res.</span><span style="color:#6F42C1;">send</span><span style="color:#24292E;">({</span></span>
<span class="line"><span style="color:#24292E;">            msg: </span><span style="color:#032F62;">&#39;恭喜你登录成功&#39;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">            info: { id:</span><span style="color:#005CC5;">1</span><span style="color:#24292E;">, name: </span><span style="color:#032F62;">&quot;zhangsan&quot;</span><span style="color:#24292E;">, username: </span><span style="color:#032F62;">&quot;admin&quot;</span><span style="color:#24292E;">, password: </span><span style="color:#032F62;">&quot;admin&quot;</span><span style="color:#24292E;"> },</span></span>
<span class="line"><span style="color:#24292E;">            isOk: </span><span style="color:#005CC5;">true</span></span>
<span class="line"><span style="color:#24292E;">          })</span></span>
<span class="line"><span style="color:#24292E;">        } </span><span style="color:#D73A49;">else</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">          res.</span><span style="color:#6F42C1;">send</span><span style="color:#24292E;">({</span></span>
<span class="line"><span style="color:#24292E;">            msg: </span><span style="color:#032F62;">&#39;登录失败，请检查账号密码&#39;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">            isOk: </span><span style="color:#005CC5;">false</span></span>
<span class="line"><span style="color:#24292E;">          })</span></span>
<span class="line"><span style="color:#24292E;">        }</span></span>
<span class="line"><span style="color:#24292E;">      }).</span><span style="color:#6F42C1;">get</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&#39;/api/user/get&#39;</span><span style="color:#24292E;">, </span><span style="color:#E36209;">res</span><span style="color:#D73A49;">=&gt;</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">        res.</span><span style="color:#6F42C1;">json</span><span style="color:#24292E;">([</span></span>
<span class="line"><span style="color:#24292E;">          { username: </span><span style="color:#032F62;">&quot;zhangsan&quot;</span><span style="color:#24292E;"> },</span></span>
<span class="line"><span style="color:#24292E;">          { username: </span><span style="color:#032F62;">&quot;王五&quot;</span><span style="color:#24292E;"> },</span></span>
<span class="line"><span style="color:#24292E;">        ])</span></span>
<span class="line"><span style="color:#24292E;">      })</span></span>
<span class="line"><span style="color:#24292E;">    }</span></span>
<span class="line"><span style="color:#24292E;">  },</span></span>
<span class="line"><span style="color:#24292E;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br></div></div><h2 id="_2-vue-config-js里面的基本配置项" tabindex="-1">2. vue.config.js里面的基本配置项 <a class="header-anchor" href="#_2-vue-config-js里面的基本配置项" aria-label="Permalink to &quot;2. vue.config.js里面的基本配置项&quot;">​</a></h2><div class="language-js vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#79B8FF;">module</span><span style="color:#E1E4E8;">.</span><span style="color:#79B8FF;">exports</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">    lintOnSave: </span><span style="color:#79B8FF;">false</span><span style="color:#E1E4E8;">,  </span><span style="color:#6A737D;">// 关闭eslint</span></span>
<span class="line"><span style="color:#E1E4E8;">    publicPath: </span><span style="color:#9ECBFF;">&#39;./&#39;</span><span style="color:#E1E4E8;">, </span><span style="color:#6A737D;">// 部署应用时的根路径(默认&#39;/&#39;),也可用相对路径(存在使用限制)</span></span>
<span class="line"><span style="color:#E1E4E8;">    outputDir: </span><span style="color:#9ECBFF;">&#39;dist&#39;</span><span style="color:#E1E4E8;">, </span><span style="color:#6A737D;">// 运行时生成的生产环境构建文件的目录(默认&#39;&#39;dist&#39;&#39;，构建之前会被清除)</span></span>
<span class="line"><span style="color:#E1E4E8;">    assetsDir: </span><span style="color:#9ECBFF;">&#39;assets&#39;</span><span style="color:#E1E4E8;">, </span><span style="color:#6A737D;">//放置生成的静态资源(s、css、img、fonts)的(相对于 outputDir 的)目录(默认&#39;&#39;)</span></span>
<span class="line"><span style="color:#E1E4E8;">    indexPath: </span><span style="color:#9ECBFF;">&#39;index.html&#39;</span><span style="color:#E1E4E8;">, </span><span style="color:#6A737D;">//指定生成的 index.html 的输出路径(相对于 outputDir)也可以是一个绝对路径。</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span></span>
<span class="line"><span style="color:#E1E4E8;">    pages: {</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#6A737D;">//pages 里配置的路径和文件名在你的文档目录必须存在 否则启动服务会报错</span></span>
<span class="line"><span style="color:#E1E4E8;">      index: {</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#6A737D;">//除了 entry 之外都是可选的</span></span>
<span class="line"><span style="color:#E1E4E8;">        entry: </span><span style="color:#9ECBFF;">&#39;src/main.js&#39;</span><span style="color:#E1E4E8;">, </span><span style="color:#6A737D;">// page 的入口,每个“page”应该有一个对应的 JavaScript 入口文件</span></span>
<span class="line"><span style="color:#E1E4E8;">        template: </span><span style="color:#9ECBFF;">&#39;public/index.html&#39;</span><span style="color:#E1E4E8;">, </span><span style="color:#6A737D;">// 模板来源</span></span>
<span class="line"><span style="color:#E1E4E8;">        filename: </span><span style="color:#9ECBFF;">&#39;index.html&#39;</span><span style="color:#E1E4E8;">, </span><span style="color:#6A737D;">// 在 dist/index.html 的输出</span></span>
<span class="line"><span style="color:#E1E4E8;">        title: </span><span style="color:#9ECBFF;">&#39;Index Page&#39;</span><span style="color:#E1E4E8;">, </span><span style="color:#6A737D;">// 当使用 title 选项时,在 template 中使用：&lt;title&gt;&lt;%= htmlWebpackPlugin.options.title %&gt;&lt;/title&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">        chunks: [</span><span style="color:#9ECBFF;">&#39;chunk-vendors&#39;</span><span style="color:#E1E4E8;">, </span><span style="color:#9ECBFF;">&#39;chunk-common&#39;</span><span style="color:#E1E4E8;">, </span><span style="color:#9ECBFF;">&#39;index&#39;</span><span style="color:#E1E4E8;">] </span><span style="color:#6A737D;">// 在这个页面中包含的块，默认情况下会包含,提取出来的通用 chunk 和 vendor chunk</span></span>
<span class="line"><span style="color:#E1E4E8;">      }</span></span>
<span class="line"><span style="color:#E1E4E8;">    },</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">    productionSourceMap: </span><span style="color:#79B8FF;">false</span><span style="color:#E1E4E8;">, </span><span style="color:#6A737D;">// 是否在构建生产包时生成 sourceMap 文件，false将提高构建速度</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">    pluginOptions: {</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#9ECBFF;">&#39;style-resources-loader&#39;</span><span style="color:#E1E4E8;">: {</span></span>
<span class="line"><span style="color:#E1E4E8;">        preProcessor: </span><span style="color:#9ECBFF;">&#39;less&#39;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">        patterns: [</span><span style="color:#9ECBFF;">&#39;src/assets/less/demo.less&#39;</span><span style="color:#E1E4E8;">, </span><span style="color:#9ECBFF;">&#39;src/assets/less/global.less&#39;</span><span style="color:#E1E4E8;">]</span></span>
<span class="line"><span style="color:#E1E4E8;">      }</span></span>
<span class="line"><span style="color:#E1E4E8;">    }</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;">// devServer: {</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;">//     open: true,</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;">//     host: &#39;localhost&#39;,</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;">//     port: 80,</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;">//     https: false,</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;">//     hotOnly: false,</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;">//     proxy: { // 配置跨域</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;">//         &#39;/api&#39;: {</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;">//             target: &#39;http://10.10.10.199:8080&#39;,</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;">//             ws: true,</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;">//             changOrigin: true,</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;">//             pathRewrite: {</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;">//                 &#39;^/api&#39;: &#39;&#39;</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;">//             }</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;">//         }</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;">//     },</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;">//     before: app =&gt; { }</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;">// }</span></span>
<span class="line"><span style="color:#E1E4E8;">};</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#005CC5;">module</span><span style="color:#24292E;">.</span><span style="color:#005CC5;">exports</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">    lintOnSave: </span><span style="color:#005CC5;">false</span><span style="color:#24292E;">,  </span><span style="color:#6A737D;">// 关闭eslint</span></span>
<span class="line"><span style="color:#24292E;">    publicPath: </span><span style="color:#032F62;">&#39;./&#39;</span><span style="color:#24292E;">, </span><span style="color:#6A737D;">// 部署应用时的根路径(默认&#39;/&#39;),也可用相对路径(存在使用限制)</span></span>
<span class="line"><span style="color:#24292E;">    outputDir: </span><span style="color:#032F62;">&#39;dist&#39;</span><span style="color:#24292E;">, </span><span style="color:#6A737D;">// 运行时生成的生产环境构建文件的目录(默认&#39;&#39;dist&#39;&#39;，构建之前会被清除)</span></span>
<span class="line"><span style="color:#24292E;">    assetsDir: </span><span style="color:#032F62;">&#39;assets&#39;</span><span style="color:#24292E;">, </span><span style="color:#6A737D;">//放置生成的静态资源(s、css、img、fonts)的(相对于 outputDir 的)目录(默认&#39;&#39;)</span></span>
<span class="line"><span style="color:#24292E;">    indexPath: </span><span style="color:#032F62;">&#39;index.html&#39;</span><span style="color:#24292E;">, </span><span style="color:#6A737D;">//指定生成的 index.html 的输出路径(相对于 outputDir)也可以是一个绝对路径。</span></span>
<span class="line"><span style="color:#24292E;">    </span></span>
<span class="line"><span style="color:#24292E;">    pages: {</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#6A737D;">//pages 里配置的路径和文件名在你的文档目录必须存在 否则启动服务会报错</span></span>
<span class="line"><span style="color:#24292E;">      index: {</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#6A737D;">//除了 entry 之外都是可选的</span></span>
<span class="line"><span style="color:#24292E;">        entry: </span><span style="color:#032F62;">&#39;src/main.js&#39;</span><span style="color:#24292E;">, </span><span style="color:#6A737D;">// page 的入口,每个“page”应该有一个对应的 JavaScript 入口文件</span></span>
<span class="line"><span style="color:#24292E;">        template: </span><span style="color:#032F62;">&#39;public/index.html&#39;</span><span style="color:#24292E;">, </span><span style="color:#6A737D;">// 模板来源</span></span>
<span class="line"><span style="color:#24292E;">        filename: </span><span style="color:#032F62;">&#39;index.html&#39;</span><span style="color:#24292E;">, </span><span style="color:#6A737D;">// 在 dist/index.html 的输出</span></span>
<span class="line"><span style="color:#24292E;">        title: </span><span style="color:#032F62;">&#39;Index Page&#39;</span><span style="color:#24292E;">, </span><span style="color:#6A737D;">// 当使用 title 选项时,在 template 中使用：&lt;title&gt;&lt;%= htmlWebpackPlugin.options.title %&gt;&lt;/title&gt;</span></span>
<span class="line"><span style="color:#24292E;">        chunks: [</span><span style="color:#032F62;">&#39;chunk-vendors&#39;</span><span style="color:#24292E;">, </span><span style="color:#032F62;">&#39;chunk-common&#39;</span><span style="color:#24292E;">, </span><span style="color:#032F62;">&#39;index&#39;</span><span style="color:#24292E;">] </span><span style="color:#6A737D;">// 在这个页面中包含的块，默认情况下会包含,提取出来的通用 chunk 和 vendor chunk</span></span>
<span class="line"><span style="color:#24292E;">      }</span></span>
<span class="line"><span style="color:#24292E;">    },</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">    productionSourceMap: </span><span style="color:#005CC5;">false</span><span style="color:#24292E;">, </span><span style="color:#6A737D;">// 是否在构建生产包时生成 sourceMap 文件，false将提高构建速度</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">    pluginOptions: {</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#032F62;">&#39;style-resources-loader&#39;</span><span style="color:#24292E;">: {</span></span>
<span class="line"><span style="color:#24292E;">        preProcessor: </span><span style="color:#032F62;">&#39;less&#39;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">        patterns: [</span><span style="color:#032F62;">&#39;src/assets/less/demo.less&#39;</span><span style="color:#24292E;">, </span><span style="color:#032F62;">&#39;src/assets/less/global.less&#39;</span><span style="color:#24292E;">]</span></span>
<span class="line"><span style="color:#24292E;">      }</span></span>
<span class="line"><span style="color:#24292E;">    }</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6A737D;">// devServer: {</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6A737D;">//     open: true,</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6A737D;">//     host: &#39;localhost&#39;,</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6A737D;">//     port: 80,</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6A737D;">//     https: false,</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6A737D;">//     hotOnly: false,</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6A737D;">//     proxy: { // 配置跨域</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6A737D;">//         &#39;/api&#39;: {</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6A737D;">//             target: &#39;http://10.10.10.199:8080&#39;,</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6A737D;">//             ws: true,</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6A737D;">//             changOrigin: true,</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6A737D;">//             pathRewrite: {</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6A737D;">//                 &#39;^/api&#39;: &#39;&#39;</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6A737D;">//             }</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6A737D;">//         }</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6A737D;">//     },</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6A737D;">//     before: app =&gt; { }</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6A737D;">// }</span></span>
<span class="line"><span style="color:#24292E;">};</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br></div></div><h2 id="_3-vue2x使用proxy做代理解决跨域问题" tabindex="-1">3. vue2x使用proxy做代理解决跨域问题 <a class="header-anchor" href="#_3-vue2x使用proxy做代理解决跨域问题" aria-label="Permalink to &quot;3. vue2x使用proxy做代理解决跨域问题&quot;">​</a></h2><div class="language-js vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#6A737D;">//开发模式反向代理配置，生产模式请使用Nginx部署并配置反向代理</span></span>
<span class="line"><span style="color:#B392F0;">devServer</span><span style="color:#E1E4E8;">: {</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#B392F0;">port</span><span style="color:#E1E4E8;">: </span><span style="color:#79B8FF;">9527</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#B392F0;">proxy</span><span style="color:#E1E4E8;">: {</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#9ECBFF;">&#39;/api&#39;</span><span style="color:#E1E4E8;">: {</span></span>
<span class="line"><span style="color:#E1E4E8;">        changeOrigin:</span><span style="color:#79B8FF;">true</span><span style="color:#E1E4E8;">,</span><span style="color:#6A737D;">//允许跨域</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#6A737D;">//本地服务接口地址</span></span>
<span class="line"><span style="color:#E1E4E8;">        target: </span><span style="color:#9ECBFF;">&#39;http://xxx/&#39;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">        ws: </span><span style="color:#79B8FF;">true</span><span style="color:#E1E4E8;">,  </span><span style="color:#6A737D;">//如果要代理 websockets，配置这个参数</span></span>
<span class="line"><span style="color:#E1E4E8;">        secure: </span><span style="color:#79B8FF;">false</span><span style="color:#E1E4E8;">,  </span><span style="color:#6A737D;">// 如果是https接口，需要配置这个参数</span></span>
<span class="line"><span style="color:#E1E4E8;">        pathRewrite: {</span></span>
<span class="line"><span style="color:#E1E4E8;">            </span><span style="color:#9ECBFF;">&#39;^/api&#39;</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">&#39;/&#39;</span></span>
<span class="line"><span style="color:#E1E4E8;">        }</span></span>
<span class="line"><span style="color:#E1E4E8;">        },</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#9ECBFF;">&#39;/elasticApi&#39;</span><span style="color:#E1E4E8;">: {</span></span>
<span class="line"><span style="color:#E1E4E8;">        changeOrigin:</span><span style="color:#79B8FF;">true</span><span style="color:#E1E4E8;">,</span><span style="color:#6A737D;">//允许跨域</span></span>
<span class="line"><span style="color:#E1E4E8;">        target: </span><span style="color:#9ECBFF;">&#39;http://192.168.2.240:9200/&#39;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">        ws: </span><span style="color:#79B8FF;">true</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">        pathRewrite: {</span></span>
<span class="line"><span style="color:#E1E4E8;">            </span><span style="color:#9ECBFF;">&#39;^/elasticApi&#39;</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">&#39;/&#39;</span></span>
<span class="line"><span style="color:#E1E4E8;">        }</span></span>
<span class="line"><span style="color:#E1E4E8;">        }</span></span>
<span class="line"><span style="color:#E1E4E8;">    }</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">export</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">getImgURI</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#FFAB70;">params</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">return</span><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">axios</span><span style="color:#E1E4E8;">({</span></span>
<span class="line"><span style="color:#E1E4E8;">        url: </span><span style="color:#9ECBFF;">\`api/upload/uploadImage\`</span><span style="color:#E1E4E8;">,  </span><span style="color:#6A737D;">// 这里api指代本地服务</span></span>
<span class="line"><span style="color:#E1E4E8;">        method: </span><span style="color:#9ECBFF;">&#39;post&#39;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">        data: params</span></span>
<span class="line"><span style="color:#E1E4E8;">    });</span></span>
<span class="line"><span style="color:#E1E4E8;">};</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">location </span><span style="color:#F97583;">^~/</span><span style="color:#E1E4E8;">api {</span></span>
<span class="line"><span style="color:#E1E4E8;">        proxy_set_header Host $host;</span></span>
<span class="line"><span style="color:#E1E4E8;">        proxy_set_header </span><span style="color:#79B8FF;">X</span><span style="color:#F97583;">-</span><span style="color:#E1E4E8;">Real</span><span style="color:#F97583;">-</span><span style="color:#79B8FF;">IP</span><span style="color:#E1E4E8;"> $remote_addr;</span></span>
<span class="line"><span style="color:#E1E4E8;">        proxy_set_header </span><span style="color:#79B8FF;">X</span><span style="color:#F97583;">-</span><span style="color:#E1E4E8;">Forwarded</span><span style="color:#F97583;">-</span><span style="color:#E1E4E8;">For $proxy_add_x_forwarded_for;</span></span>
<span class="line"><span style="color:#E1E4E8;">        proxy_buffering off;</span></span>
<span class="line"><span style="color:#E1E4E8;">        rewrite </span><span style="color:#F97583;">^</span><span style="color:#9ECBFF;">/</span><span style="color:#DBEDFF;">api</span><span style="color:#9ECBFF;">/</span><span style="color:#E1E4E8;">(.</span><span style="color:#F97583;">*</span><span style="color:#E1E4E8;">)$ </span><span style="color:#F97583;">/</span><span style="color:#E1E4E8;">$1 </span><span style="color:#F97583;">break</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#E1E4E8;">        proxy_pass </span><span style="color:#B392F0;">http</span><span style="color:#E1E4E8;">:</span><span style="color:#6A737D;">//192.168.2.245:8031/;</span></span>
<span class="line"><span style="color:#E1E4E8;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">    error_page   </span><span style="color:#79B8FF;">500</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">502</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">503</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">504</span><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">/</span><span style="color:#E1E4E8;">50x.html;</span></span>
<span class="line"><span style="color:#E1E4E8;">    location </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">/</span><span style="color:#E1E4E8;">50x.html {</span></span>
<span class="line"><span style="color:#E1E4E8;">        root   html;</span></span>
<span class="line"><span style="color:#E1E4E8;">    }</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;">//开发模式反向代理配置，生产模式请使用Nginx部署并配置反向代理</span></span>
<span class="line"><span style="color:#6F42C1;">devServer</span><span style="color:#24292E;">: {</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6F42C1;">port</span><span style="color:#24292E;">: </span><span style="color:#005CC5;">9527</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6F42C1;">proxy</span><span style="color:#24292E;">: {</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#032F62;">&#39;/api&#39;</span><span style="color:#24292E;">: {</span></span>
<span class="line"><span style="color:#24292E;">        changeOrigin:</span><span style="color:#005CC5;">true</span><span style="color:#24292E;">,</span><span style="color:#6A737D;">//允许跨域</span></span>
<span class="line"><span style="color:#24292E;">        </span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#6A737D;">//本地服务接口地址</span></span>
<span class="line"><span style="color:#24292E;">        target: </span><span style="color:#032F62;">&#39;http://xxx/&#39;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">        ws: </span><span style="color:#005CC5;">true</span><span style="color:#24292E;">,  </span><span style="color:#6A737D;">//如果要代理 websockets，配置这个参数</span></span>
<span class="line"><span style="color:#24292E;">        secure: </span><span style="color:#005CC5;">false</span><span style="color:#24292E;">,  </span><span style="color:#6A737D;">// 如果是https接口，需要配置这个参数</span></span>
<span class="line"><span style="color:#24292E;">        pathRewrite: {</span></span>
<span class="line"><span style="color:#24292E;">            </span><span style="color:#032F62;">&#39;^/api&#39;</span><span style="color:#24292E;">: </span><span style="color:#032F62;">&#39;/&#39;</span></span>
<span class="line"><span style="color:#24292E;">        }</span></span>
<span class="line"><span style="color:#24292E;">        },</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#032F62;">&#39;/elasticApi&#39;</span><span style="color:#24292E;">: {</span></span>
<span class="line"><span style="color:#24292E;">        changeOrigin:</span><span style="color:#005CC5;">true</span><span style="color:#24292E;">,</span><span style="color:#6A737D;">//允许跨域</span></span>
<span class="line"><span style="color:#24292E;">        target: </span><span style="color:#032F62;">&#39;http://192.168.2.240:9200/&#39;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">        ws: </span><span style="color:#005CC5;">true</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">        pathRewrite: {</span></span>
<span class="line"><span style="color:#24292E;">            </span><span style="color:#032F62;">&#39;^/elasticApi&#39;</span><span style="color:#24292E;">: </span><span style="color:#032F62;">&#39;/&#39;</span></span>
<span class="line"><span style="color:#24292E;">        }</span></span>
<span class="line"><span style="color:#24292E;">        }</span></span>
<span class="line"><span style="color:#24292E;">    }</span></span>
<span class="line"><span style="color:#24292E;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;">export</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">getImgURI</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#E36209;">params</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=&gt;</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">return</span><span style="color:#24292E;">  </span><span style="color:#6F42C1;">axios</span><span style="color:#24292E;">({</span></span>
<span class="line"><span style="color:#24292E;">        url: </span><span style="color:#032F62;">\`api/upload/uploadImage\`</span><span style="color:#24292E;">,  </span><span style="color:#6A737D;">// 这里api指代本地服务</span></span>
<span class="line"><span style="color:#24292E;">        method: </span><span style="color:#032F62;">&#39;post&#39;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">        data: params</span></span>
<span class="line"><span style="color:#24292E;">    });</span></span>
<span class="line"><span style="color:#24292E;">};</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">location </span><span style="color:#D73A49;">^~/</span><span style="color:#24292E;">api {</span></span>
<span class="line"><span style="color:#24292E;">        proxy_set_header Host $host;</span></span>
<span class="line"><span style="color:#24292E;">        proxy_set_header </span><span style="color:#005CC5;">X</span><span style="color:#D73A49;">-</span><span style="color:#24292E;">Real</span><span style="color:#D73A49;">-</span><span style="color:#005CC5;">IP</span><span style="color:#24292E;"> $remote_addr;</span></span>
<span class="line"><span style="color:#24292E;">        proxy_set_header </span><span style="color:#005CC5;">X</span><span style="color:#D73A49;">-</span><span style="color:#24292E;">Forwarded</span><span style="color:#D73A49;">-</span><span style="color:#24292E;">For $proxy_add_x_forwarded_for;</span></span>
<span class="line"><span style="color:#24292E;">        proxy_buffering off;</span></span>
<span class="line"><span style="color:#24292E;">        rewrite </span><span style="color:#D73A49;">^</span><span style="color:#032F62;">/api/</span><span style="color:#24292E;">(.</span><span style="color:#D73A49;">*</span><span style="color:#24292E;">)$ </span><span style="color:#D73A49;">/</span><span style="color:#24292E;">$1 </span><span style="color:#D73A49;">break</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#24292E;">        proxy_pass </span><span style="color:#6F42C1;">http</span><span style="color:#24292E;">:</span><span style="color:#6A737D;">//192.168.2.245:8031/;</span></span>
<span class="line"><span style="color:#24292E;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">    error_page   </span><span style="color:#005CC5;">500</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">502</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">503</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">504</span><span style="color:#24292E;">  </span><span style="color:#D73A49;">/</span><span style="color:#24292E;">50x.html;</span></span>
<span class="line"><span style="color:#24292E;">    location </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">/</span><span style="color:#24292E;">50x.html {</span></span>
<span class="line"><span style="color:#24292E;">        root   html;</span></span>
<span class="line"><span style="color:#24292E;">    }</span></span>
<span class="line"><span style="color:#24292E;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br></div></div><h2 id="_4-配置全局less" tabindex="-1">4. 配置全局less <a class="header-anchor" href="#_4-配置全局less" aria-label="Permalink to &quot;4. 配置全局less&quot;">​</a></h2><ul><li>方法一 <ul><li><code>npm i style-resources-loader -S</code></li><li>创建less文件</li><li>在vue.config.js中进行配置</li></ul><div class="language-js vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#79B8FF;">module</span><span style="color:#E1E4E8;">.</span><span style="color:#79B8FF;">exports</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">......</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;">// 引入公共less</span></span>
<span class="line"><span style="color:#E1E4E8;">    pluginOptions: {</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#9ECBFF;">&#39;style-resources-loader&#39;</span><span style="color:#E1E4E8;">: {</span></span>
<span class="line"><span style="color:#E1E4E8;">            preProcessor: </span><span style="color:#9ECBFF;">&#39;less&#39;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">            patterns:  [</span><span style="color:#9ECBFF;">&#39;src/assets/less/demo.less&#39;</span><span style="color:#E1E4E8;">, </span><span style="color:#9ECBFF;">&#39;src/assets/less/global.less&#39;</span><span style="color:#E1E4E8;">]</span></span>
<span class="line"><span style="color:#E1E4E8;">        }</span></span>
<span class="line"><span style="color:#E1E4E8;">    },</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">......</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#005CC5;">module</span><span style="color:#24292E;">.</span><span style="color:#005CC5;">exports</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">......</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6A737D;">// 引入公共less</span></span>
<span class="line"><span style="color:#24292E;">    pluginOptions: {</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#032F62;">&#39;style-resources-loader&#39;</span><span style="color:#24292E;">: {</span></span>
<span class="line"><span style="color:#24292E;">            preProcessor: </span><span style="color:#032F62;">&#39;less&#39;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">            patterns:  [</span><span style="color:#032F62;">&#39;src/assets/less/demo.less&#39;</span><span style="color:#24292E;">, </span><span style="color:#032F62;">&#39;src/assets/less/global.less&#39;</span><span style="color:#24292E;">]</span></span>
<span class="line"><span style="color:#24292E;">        }</span></span>
<span class="line"><span style="color:#24292E;">    },</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">......</span></span>
<span class="line"><span style="color:#24292E;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div></li><li>方法二 <ul><li>vuecli3x+</li><li>vue add style-resources-loader</li><li>安装完之后vue.config.js里面会自动出现以下内容<div class="language-js vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">pluginOptions</span><span style="color:#E1E4E8;">: {</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#9ECBFF;">&#39;style-resources-loader&#39;</span><span style="color:#E1E4E8;">: {</span></span>
<span class="line"><span style="color:#E1E4E8;">        preProcessor: </span><span style="color:#9ECBFF;">&#39;less&#39;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">        patterns: []</span></span>
<span class="line"><span style="color:#E1E4E8;">    }</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">pluginOptions</span><span style="color:#24292E;">: {</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#032F62;">&#39;style-resources-loader&#39;</span><span style="color:#24292E;">: {</span></span>
<span class="line"><span style="color:#24292E;">        preProcessor: </span><span style="color:#032F62;">&#39;less&#39;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">        patterns: []</span></span>
<span class="line"><span style="color:#24292E;">    }</span></span>
<span class="line"><span style="color:#24292E;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div></li></ul></li></ul><h2 id="_5-vue中将简体转成繁体" tabindex="-1">5. vue中将简体转成繁体 <a class="header-anchor" href="#_5-vue中将简体转成繁体" aria-label="Permalink to &quot;5. vue中将简体转成繁体&quot;">​</a></h2><div class="language-js vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#6A737D;">// 引入包</span></span>
<span class="line"><span style="color:#E1E4E8;">yarn add language</span><span style="color:#F97583;">-</span><span style="color:#E1E4E8;">tw</span><span style="color:#F97583;">-</span><span style="color:#E1E4E8;">loader</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">// vue.config.js</span></span>
<span class="line"><span style="color:#B392F0;">configureWebpack</span><span style="color:#E1E4E8;">: {</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#B392F0;">module</span><span style="color:#E1E4E8;">: {</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#B392F0;">rules</span><span style="color:#E1E4E8;">: [ </span><span style="color:#6A737D;">// 可在package.json 配置顶层 sideEffects: false</span></span>
<span class="line"><span style="color:#E1E4E8;">        {</span></span>
<span class="line"><span style="color:#E1E4E8;">            test:</span><span style="color:#DBEDFF;"> </span><span style="color:#9ECBFF;">/</span><span style="color:#85E89D;font-weight:bold;">\\.</span><span style="color:#DBEDFF;">(js</span><span style="color:#F97583;">|</span><span style="color:#DBEDFF;">vue)</span><span style="color:#F97583;">$</span><span style="color:#9ECBFF;">/</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">            loader: </span><span style="color:#9ECBFF;">&#39;language-tw-loader&#39;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">        }</span></span>
<span class="line"><span style="color:#E1E4E8;">        ]</span></span>
<span class="line"><span style="color:#E1E4E8;">    },</span></span>
<span class="line"><span style="color:#E1E4E8;">},</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;">// 引入包</span></span>
<span class="line"><span style="color:#24292E;">yarn add language</span><span style="color:#D73A49;">-</span><span style="color:#24292E;">tw</span><span style="color:#D73A49;">-</span><span style="color:#24292E;">loader</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">// vue.config.js</span></span>
<span class="line"><span style="color:#6F42C1;">configureWebpack</span><span style="color:#24292E;">: {</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6F42C1;">module</span><span style="color:#24292E;">: {</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#6F42C1;">rules</span><span style="color:#24292E;">: [ </span><span style="color:#6A737D;">// 可在package.json 配置顶层 sideEffects: false</span></span>
<span class="line"><span style="color:#24292E;">        {</span></span>
<span class="line"><span style="color:#24292E;">            test:</span><span style="color:#032F62;"> /</span><span style="color:#22863A;font-weight:bold;">\\.</span><span style="color:#032F62;">(js</span><span style="color:#D73A49;">|</span><span style="color:#032F62;">vue)</span><span style="color:#D73A49;">$</span><span style="color:#032F62;">/</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">            loader: </span><span style="color:#032F62;">&#39;language-tw-loader&#39;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">        }</span></span>
<span class="line"><span style="color:#24292E;">        ]</span></span>
<span class="line"><span style="color:#24292E;">    },</span></span>
<span class="line"><span style="color:#24292E;">},</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><h2 id="_6-配置全局axios服务" tabindex="-1">6. 配置全局axios服务 <a class="header-anchor" href="#_6-配置全局axios服务" aria-label="Permalink to &quot;6. 配置全局axios服务&quot;">​</a></h2><ul><li>安装axios<div class="language-js vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> axios </span><span style="color:#F97583;">from</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;axios&quot;</span></span>
<span class="line"><span style="color:#79B8FF;">Vue</span><span style="color:#E1E4E8;">.</span><span style="color:#79B8FF;">prototype</span><span style="color:#E1E4E8;">.axios </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> axios;</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">import</span><span style="color:#24292E;"> axios </span><span style="color:#D73A49;">from</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;axios&quot;</span></span>
<span class="line"><span style="color:#005CC5;">Vue</span><span style="color:#24292E;">.</span><span style="color:#005CC5;">prototype</span><span style="color:#24292E;">.axios </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> axios;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div></li><li>配置开发环境和打包环境 <ul><li>.env.development和.env.production是全局文件，vue会根据环境自动识别</li><li>.env.development<div class="language-js vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;"># 开发环境</span></span>
<span class="line"><span style="color:#79B8FF;">VUE_APP_BASE_API</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;http://localhost:8088/&#39;</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;"># 开发环境</span></span>
<span class="line"><span style="color:#005CC5;">VUE_APP_BASE_API</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;http://localhost:8088/&#39;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div></li><li>.env.production<div class="language-js vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;"># 线上环境</span></span>
<span class="line"><span style="color:#79B8FF;">VUE_APP_BASE_API</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;http://localhost:80881/&#39;</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;"># 线上环境</span></span>
<span class="line"><span style="color:#005CC5;">VUE_APP_BASE_API</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;http://localhost:80881/&#39;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div></li></ul></li><li>封装axios<div class="language-js vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> axios </span><span style="color:#F97583;">from</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;axios&#39;</span></span>
<span class="line"><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> { Message } </span><span style="color:#F97583;">from</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;element-ui&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> router </span><span style="color:#F97583;">from</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;../router&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">console.</span><span style="color:#B392F0;">log</span><span style="color:#E1E4E8;">(p<wbr>rocess.env.</span><span style="color:#79B8FF;">VUE_APP_BASE_API</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">Axios</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> axios.</span><span style="color:#B392F0;">create</span><span style="color:#E1E4E8;">({</span></span>
<span class="line"><span style="color:#E1E4E8;">    baseURL: p<wbr>rocess.env.</span><span style="color:#79B8FF;">VUE_APP_BASE_API</span><span style="color:#E1E4E8;">, </span><span style="color:#6A737D;">// api</span></span>
<span class="line"><span style="color:#E1E4E8;">    timeout: </span><span style="color:#79B8FF;">100000</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">    responseType: </span><span style="color:#9ECBFF;">&quot;json&quot;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">    withCredentials: </span><span style="color:#79B8FF;">true</span><span style="color:#E1E4E8;">, </span><span style="color:#6A737D;">// 是否允许带cookie这些</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;">// headers: {</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;">//     &quot;Content-Type&quot;: &quot;application/json;charset=utf-8&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;">// }</span></span>
<span class="line"><span style="color:#E1E4E8;">});</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">//请求拦截  设置统一header</span></span>
<span class="line"><span style="color:#E1E4E8;">Axios.interceptors.request.</span><span style="color:#B392F0;">use</span><span style="color:#E1E4E8;">(</span><span style="color:#FFAB70;">config</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;">// console.log(config);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">return</span><span style="color:#E1E4E8;"> config</span></span>
<span class="line"><span style="color:#E1E4E8;">}, </span><span style="color:#FFAB70;">error</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">return</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">Promise</span><span style="color:#E1E4E8;">.</span><span style="color:#B392F0;">reject</span><span style="color:#E1E4E8;">(error)</span></span>
<span class="line"><span style="color:#E1E4E8;">});</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">//响应拦截  401 过期处理</span></span>
<span class="line"><span style="color:#E1E4E8;">Axios.interceptors.response.</span><span style="color:#B392F0;">use</span><span style="color:#E1E4E8;">(</span><span style="color:#FFAB70;">response</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;">// console.log(response.data.msg);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> { </span><span style="color:#79B8FF;">code</span><span style="color:#E1E4E8;"> } </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> response.data;  </span><span style="color:#6A737D;">//响应登录状态码</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;">// console.log(code);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;">// 如果响应请求未登录，则返回登录页面</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">if</span><span style="color:#E1E4E8;"> (code </span><span style="color:#F97583;">==</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">-</span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;">){</span></span>
<span class="line"><span style="color:#E1E4E8;">        Message.</span><span style="color:#B392F0;">error</span><span style="color:#E1E4E8;">(response.data.msg);</span></span>
<span class="line"><span style="color:#E1E4E8;">        router.</span><span style="color:#B392F0;">push</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;/login&#39;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">return</span><span style="color:#E1E4E8;"> response</span></span>
<span class="line"><span style="color:#E1E4E8;">}, </span><span style="color:#FFAB70;">error</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;">// console.log(error.response);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> { </span><span style="color:#79B8FF;">status</span><span style="color:#E1E4E8;"> } </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> error.response;  </span><span style="color:#6A737D;">//响应错误状态</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> { </span><span style="color:#79B8FF;">data</span><span style="color:#E1E4E8;"> } </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> error.response;  </span><span style="color:#6A737D;">//响应错误详情</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;">// 错误提醒</span></span>
<span class="line"><span style="color:#E1E4E8;">    Message.</span><span style="color:#B392F0;">error</span><span style="color:#E1E4E8;">(data.message);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">if</span><span style="color:#E1E4E8;"> (status </span><span style="color:#F97583;">===</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">401</span><span style="color:#E1E4E8;">) {</span></span>
<span class="line"><span style="color:#E1E4E8;">        Message.</span><span style="color:#B392F0;">error</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;登录失效，请重新登录&#39;</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">        localStorage.</span><span style="color:#B392F0;">removeItem</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;code&#39;</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#E1E4E8;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">return</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">Promise</span><span style="color:#E1E4E8;">.</span><span style="color:#B392F0;">reject</span><span style="color:#E1E4E8;">(error)</span></span>
<span class="line"><span style="color:#E1E4E8;">});</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">export</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">default</span><span style="color:#E1E4E8;"> Axios;</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">import</span><span style="color:#24292E;"> axios </span><span style="color:#D73A49;">from</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;axios&#39;</span></span>
<span class="line"><span style="color:#D73A49;">import</span><span style="color:#24292E;"> { Message } </span><span style="color:#D73A49;">from</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;element-ui&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;">import</span><span style="color:#24292E;"> router </span><span style="color:#D73A49;">from</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;../router&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">console.</span><span style="color:#6F42C1;">log</span><span style="color:#24292E;">(p<wbr>rocess.env.</span><span style="color:#005CC5;">VUE_APP_BASE_API</span><span style="color:#24292E;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">Axios</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> axios.</span><span style="color:#6F42C1;">create</span><span style="color:#24292E;">({</span></span>
<span class="line"><span style="color:#24292E;">    baseURL: p<wbr>rocess.env.</span><span style="color:#005CC5;">VUE_APP_BASE_API</span><span style="color:#24292E;">, </span><span style="color:#6A737D;">// api</span></span>
<span class="line"><span style="color:#24292E;">    timeout: </span><span style="color:#005CC5;">100000</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">    responseType: </span><span style="color:#032F62;">&quot;json&quot;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">    withCredentials: </span><span style="color:#005CC5;">true</span><span style="color:#24292E;">, </span><span style="color:#6A737D;">// 是否允许带cookie这些</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6A737D;">// headers: {</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6A737D;">//     &quot;Content-Type&quot;: &quot;application/json;charset=utf-8&quot;</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6A737D;">// }</span></span>
<span class="line"><span style="color:#24292E;">});</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">//请求拦截  设置统一header</span></span>
<span class="line"><span style="color:#24292E;">Axios.interceptors.request.</span><span style="color:#6F42C1;">use</span><span style="color:#24292E;">(</span><span style="color:#E36209;">config</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=&gt;</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6A737D;">// console.log(config);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">return</span><span style="color:#24292E;"> config</span></span>
<span class="line"><span style="color:#24292E;">}, </span><span style="color:#E36209;">error</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=&gt;</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">return</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">Promise</span><span style="color:#24292E;">.</span><span style="color:#6F42C1;">reject</span><span style="color:#24292E;">(error)</span></span>
<span class="line"><span style="color:#24292E;">});</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">//响应拦截  401 过期处理</span></span>
<span class="line"><span style="color:#24292E;">Axios.interceptors.response.</span><span style="color:#6F42C1;">use</span><span style="color:#24292E;">(</span><span style="color:#E36209;">response</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=&gt;</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6A737D;">// console.log(response.data.msg);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">const</span><span style="color:#24292E;"> { </span><span style="color:#005CC5;">code</span><span style="color:#24292E;"> } </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> response.data;  </span><span style="color:#6A737D;">//响应登录状态码</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6A737D;">// console.log(code);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6A737D;">// 如果响应请求未登录，则返回登录页面</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">if</span><span style="color:#24292E;"> (code </span><span style="color:#D73A49;">==</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">-</span><span style="color:#005CC5;">1</span><span style="color:#24292E;">){</span></span>
<span class="line"><span style="color:#24292E;">        Message.</span><span style="color:#6F42C1;">error</span><span style="color:#24292E;">(response.data.msg);</span></span>
<span class="line"><span style="color:#24292E;">        router.</span><span style="color:#6F42C1;">push</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&#39;/login&#39;</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#24292E;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">return</span><span style="color:#24292E;"> response</span></span>
<span class="line"><span style="color:#24292E;">}, </span><span style="color:#E36209;">error</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=&gt;</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6A737D;">// console.log(error.response);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">const</span><span style="color:#24292E;"> { </span><span style="color:#005CC5;">status</span><span style="color:#24292E;"> } </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> error.response;  </span><span style="color:#6A737D;">//响应错误状态</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">const</span><span style="color:#24292E;"> { </span><span style="color:#005CC5;">data</span><span style="color:#24292E;"> } </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> error.response;  </span><span style="color:#6A737D;">//响应错误详情</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6A737D;">// 错误提醒</span></span>
<span class="line"><span style="color:#24292E;">    Message.</span><span style="color:#6F42C1;">error</span><span style="color:#24292E;">(data.message);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">if</span><span style="color:#24292E;"> (status </span><span style="color:#D73A49;">===</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">401</span><span style="color:#24292E;">) {</span></span>
<span class="line"><span style="color:#24292E;">        Message.</span><span style="color:#6F42C1;">error</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&#39;登录失效，请重新登录&#39;</span><span style="color:#24292E;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">        localStorage.</span><span style="color:#6F42C1;">removeItem</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&#39;code&#39;</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#24292E;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">return</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">Promise</span><span style="color:#24292E;">.</span><span style="color:#6F42C1;">reject</span><span style="color:#24292E;">(error)</span></span>
<span class="line"><span style="color:#24292E;">});</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;">export</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">default</span><span style="color:#24292E;"> Axios;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br></div></div></li><li>配置文件vue.config.js <ul><li>注意：使用配置文件请求要注释掉 axios里面的url <ul><li><code>baseURL: p<wbr>rocess.env.VUE_APP_BASE_API, // api</code></li></ul></li></ul><div class="language-js vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">serverPath</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> p<wbr>rocess.env.</span><span style="color:#79B8FF;">VUE_APP_BASE_API</span><span style="color:#E1E4E8;">;  </span><span style="color:#6A737D;">// 配置文件也可以获取.env变量</span></span>
<span class="line"><span style="color:#E1E4E8;">console.</span><span style="color:#B392F0;">log</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;env&quot;</span><span style="color:#E1E4E8;">, serverPath)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#79B8FF;">module</span><span style="color:#E1E4E8;">.</span><span style="color:#79B8FF;">exports</span><span style="color:#E1E4E8;">: {</span></span>
<span class="line"><span style="color:#E1E4E8;">  devServer: {</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;">// open: true,</span></span>
<span class="line"><span style="color:#E1E4E8;">    host: </span><span style="color:#9ECBFF;">&#39;localhost&#39;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">    port: </span><span style="color:#79B8FF;">8088</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">    https: </span><span style="color:#79B8FF;">false</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">    hotOnly: </span><span style="color:#79B8FF;">false</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">    proxy: { </span><span style="color:#6A737D;">// 配置跨域</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#9ECBFF;">&#39;/api&#39;</span><span style="color:#E1E4E8;">: {</span></span>
<span class="line"><span style="color:#E1E4E8;">            </span><span style="color:#6A737D;">// 用.env变量配置跨越</span></span>
<span class="line"><span style="color:#E1E4E8;">            target: serverPath,</span></span>
<span class="line"><span style="color:#E1E4E8;">            ws: </span><span style="color:#79B8FF;">true</span><span style="color:#E1E4E8;">,  </span><span style="color:#6A737D;">// 是否启用websockets</span></span>
<span class="line"><span style="color:#E1E4E8;">            changOrigin: </span><span style="color:#79B8FF;">true</span><span style="color:#E1E4E8;">,  </span><span style="color:#6A737D;">// 开启代理，在本地创建一个虚拟服务端</span></span>
<span class="line"><span style="color:#E1E4E8;">            pathRewrite: {</span></span>
<span class="line"><span style="color:#E1E4E8;">                </span><span style="color:#9ECBFF;">&#39;^/api&#39;</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">&#39;&#39;</span></span>
<span class="line"><span style="color:#E1E4E8;">            }</span></span>
<span class="line"><span style="color:#E1E4E8;">        }</span></span>
<span class="line"><span style="color:#E1E4E8;">    },</span></span>
<span class="line"><span style="color:#E1E4E8;">  }</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">serverPath</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> p<wbr>rocess.env.</span><span style="color:#005CC5;">VUE_APP_BASE_API</span><span style="color:#24292E;">;  </span><span style="color:#6A737D;">// 配置文件也可以获取.env变量</span></span>
<span class="line"><span style="color:#24292E;">console.</span><span style="color:#6F42C1;">log</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;env&quot;</span><span style="color:#24292E;">, serverPath)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#005CC5;">module</span><span style="color:#24292E;">.</span><span style="color:#005CC5;">exports</span><span style="color:#24292E;">: {</span></span>
<span class="line"><span style="color:#24292E;">  devServer: {</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6A737D;">// open: true,</span></span>
<span class="line"><span style="color:#24292E;">    host: </span><span style="color:#032F62;">&#39;localhost&#39;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">    port: </span><span style="color:#005CC5;">8088</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">    https: </span><span style="color:#005CC5;">false</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">    hotOnly: </span><span style="color:#005CC5;">false</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">    proxy: { </span><span style="color:#6A737D;">// 配置跨域</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#032F62;">&#39;/api&#39;</span><span style="color:#24292E;">: {</span></span>
<span class="line"><span style="color:#24292E;">            </span><span style="color:#6A737D;">// 用.env变量配置跨越</span></span>
<span class="line"><span style="color:#24292E;">            target: serverPath,</span></span>
<span class="line"><span style="color:#24292E;">            ws: </span><span style="color:#005CC5;">true</span><span style="color:#24292E;">,  </span><span style="color:#6A737D;">// 是否启用websockets</span></span>
<span class="line"><span style="color:#24292E;">            changOrigin: </span><span style="color:#005CC5;">true</span><span style="color:#24292E;">,  </span><span style="color:#6A737D;">// 开启代理，在本地创建一个虚拟服务端</span></span>
<span class="line"><span style="color:#24292E;">            pathRewrite: {</span></span>
<span class="line"><span style="color:#24292E;">                </span><span style="color:#032F62;">&#39;^/api&#39;</span><span style="color:#24292E;">: </span><span style="color:#032F62;">&#39;&#39;</span></span>
<span class="line"><span style="color:#24292E;">            }</span></span>
<span class="line"><span style="color:#24292E;">        }</span></span>
<span class="line"><span style="color:#24292E;">    },</span></span>
<span class="line"><span style="color:#24292E;">  }</span></span>
<span class="line"><span style="color:#24292E;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br></div></div></li></ul><h2 id="_7-大屏配置" tabindex="-1">7. 大屏配置 <a class="header-anchor" href="#_7-大屏配置" aria-label="Permalink to &quot;7. 大屏配置&quot;">​</a></h2><blockquote><p>将全局px转换成rem</p></blockquote><ul><li>安装插件 <ul><li>yarn add @njleonzhang/postcss-px-to-rem</li><li>yarn add lib-flexible-for-dashboard</li></ul></li><li>创建配置文件 =&gt; .postcssrc.js<div class="language-js vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#79B8FF;">module</span><span style="color:#E1E4E8;">.</span><span style="color:#79B8FF;">exports</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">  plugins: {</span></span>
<span class="line"><span style="color:#E1E4E8;">    autoprefixer: {},</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#9ECBFF;">&quot;@njleonzhang/postcss-px-to-rem&quot;</span><span style="color:#E1E4E8;">: {</span></span>
<span class="line"><span style="color:#E1E4E8;">      unitToConvert: </span><span style="color:#9ECBFF;">&#39;px&#39;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">      widthOfDesignLayout:  </span><span style="color:#79B8FF;">1920</span><span style="color:#E1E4E8;">, </span><span style="color:#6A737D;">// 设计稿的宽度 ，就是设计的UI宽度</span></span>
<span class="line"><span style="color:#E1E4E8;">      unitPrecision: </span><span style="color:#79B8FF;">3</span><span style="color:#E1E4E8;">, </span><span style="color:#6A737D;">// 十进制的单位</span></span>
<span class="line"><span style="color:#E1E4E8;">      selectorBlackList: [</span><span style="color:#9ECBFF;">&#39;.ignore&#39;</span><span style="color:#E1E4E8;">, </span><span style="color:#9ECBFF;">&#39;.hairlines&#39;</span><span style="color:#E1E4E8;">, </span><span style="color:#9ECBFF;">&#39;.el-&#39;</span><span style="color:#E1E4E8;">, </span><span style="color:#9ECBFF;">&#39;.zmx_&#39;</span><span style="color:#E1E4E8;">], </span><span style="color:#6A737D;">// (Array) 过滤那些不用转换的class</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#6A737D;">// selectorBlackList: [&#39;.ignore&#39;, &#39;.hairlines&#39;], // (Array) 过滤那些不用转换的class</span></span>
<span class="line"><span style="color:#E1E4E8;">      minPixelValue: </span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;">, </span><span style="color:#6A737D;">// 设置要替换的最小像素值</span></span>
<span class="line"><span style="color:#E1E4E8;">      mediaQuery: </span><span style="color:#79B8FF;">false</span><span style="color:#E1E4E8;">, </span><span style="color:#6A737D;">// 允许在媒体查询中转换px</span></span>
<span class="line"><span style="color:#E1E4E8;">    }</span></span>
<span class="line"><span style="color:#E1E4E8;">  }</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#005CC5;">module</span><span style="color:#24292E;">.</span><span style="color:#005CC5;">exports</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">  plugins: {</span></span>
<span class="line"><span style="color:#24292E;">    autoprefixer: {},</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#032F62;">&quot;@njleonzhang/postcss-px-to-rem&quot;</span><span style="color:#24292E;">: {</span></span>
<span class="line"><span style="color:#24292E;">      unitToConvert: </span><span style="color:#032F62;">&#39;px&#39;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">      widthOfDesignLayout:  </span><span style="color:#005CC5;">1920</span><span style="color:#24292E;">, </span><span style="color:#6A737D;">// 设计稿的宽度 ，就是设计的UI宽度</span></span>
<span class="line"><span style="color:#24292E;">      unitPrecision: </span><span style="color:#005CC5;">3</span><span style="color:#24292E;">, </span><span style="color:#6A737D;">// 十进制的单位</span></span>
<span class="line"><span style="color:#24292E;">      selectorBlackList: [</span><span style="color:#032F62;">&#39;.ignore&#39;</span><span style="color:#24292E;">, </span><span style="color:#032F62;">&#39;.hairlines&#39;</span><span style="color:#24292E;">, </span><span style="color:#032F62;">&#39;.el-&#39;</span><span style="color:#24292E;">, </span><span style="color:#032F62;">&#39;.zmx_&#39;</span><span style="color:#24292E;">], </span><span style="color:#6A737D;">// (Array) 过滤那些不用转换的class</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#6A737D;">// selectorBlackList: [&#39;.ignore&#39;, &#39;.hairlines&#39;], // (Array) 过滤那些不用转换的class</span></span>
<span class="line"><span style="color:#24292E;">      minPixelValue: </span><span style="color:#005CC5;">1</span><span style="color:#24292E;">, </span><span style="color:#6A737D;">// 设置要替换的最小像素值</span></span>
<span class="line"><span style="color:#24292E;">      mediaQuery: </span><span style="color:#005CC5;">false</span><span style="color:#24292E;">, </span><span style="color:#6A737D;">// 允许在媒体查询中转换px</span></span>
<span class="line"><span style="color:#24292E;">    }</span></span>
<span class="line"><span style="color:#24292E;">  }</span></span>
<span class="line"><span style="color:#24292E;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div></li><li>在main.js里面做配置<div class="language-js vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">dashboardFlexible</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">require</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;lib-flexible-for-dashboard&#39;</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#E1E4E8;">dashboardFlexible.</span><span style="color:#B392F0;">init</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">16</span><span style="color:#F97583;">/</span><span style="color:#79B8FF;">9</span><span style="color:#E1E4E8;">)</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">dashboardFlexible</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">require</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&#39;lib-flexible-for-dashboard&#39;</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#24292E;">dashboardFlexible.</span><span style="color:#6F42C1;">init</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">16</span><span style="color:#D73A49;">/</span><span style="color:#005CC5;">9</span><span style="color:#24292E;">)</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div></li><li>less公共文件<div class="language-js vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#79B8FF;">module</span><span style="color:#E1E4E8;">.</span><span style="color:#79B8FF;">exports</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">  pluginOptions: {</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#9ECBFF;">&#39;style-resources-loader&#39;</span><span style="color:#E1E4E8;">: {</span></span>
<span class="line"><span style="color:#E1E4E8;">      preProcessor: </span><span style="color:#9ECBFF;">&#39;less&#39;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">      patterns: [</span><span style="color:#9ECBFF;">&#39;src/assets/less/tools.less&#39;</span><span style="color:#E1E4E8;">, </span><span style="color:#9ECBFF;">&#39;src/assets/less/global.less&#39;</span><span style="color:#E1E4E8;">, </span><span style="color:#9ECBFF;">&#39;src/assets/less/layerpx.less&#39;</span><span style="color:#E1E4E8;">]</span></span>
<span class="line"><span style="color:#E1E4E8;">    }</span></span>
<span class="line"><span style="color:#E1E4E8;">  }</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#005CC5;">module</span><span style="color:#24292E;">.</span><span style="color:#005CC5;">exports</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">  pluginOptions: {</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#032F62;">&#39;style-resources-loader&#39;</span><span style="color:#24292E;">: {</span></span>
<span class="line"><span style="color:#24292E;">      preProcessor: </span><span style="color:#032F62;">&#39;less&#39;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">      patterns: [</span><span style="color:#032F62;">&#39;src/assets/less/tools.less&#39;</span><span style="color:#24292E;">, </span><span style="color:#032F62;">&#39;src/assets/less/global.less&#39;</span><span style="color:#24292E;">, </span><span style="color:#032F62;">&#39;src/assets/less/layerpx.less&#39;</span><span style="color:#24292E;">]</span></span>
<span class="line"><span style="color:#24292E;">    }</span></span>
<span class="line"><span style="color:#24292E;">  }</span></span>
<span class="line"><span style="color:#24292E;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><ul><li>tools.less <ul><li>全局工具样式 - 公共按钮、弹出框 。。。</li></ul></li><li>global.less <ul><li>规定全局样式变量及框架整体布局</li></ul></li><li>layerpx.less <ul><li>不转换成rem，基本用于框架整体布局</li><li>以zmx_为前缀</li></ul><div class="language-less vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">less</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">.container</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#85E89D;">header</span><span style="color:#E1E4E8;"> {}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">.zmx_aside</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#79B8FF;">min-width</span><span style="color:#E1E4E8;">: </span><span style="color:#79B8FF;">160</span><span style="color:#F97583;">px</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#E1E4E8;">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">.main</span><span style="color:#E1E4E8;"> {}</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">.container</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#22863A;">header</span><span style="color:#24292E;"> {}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">.zmx_aside</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#005CC5;">min-width</span><span style="color:#24292E;">: </span><span style="color:#005CC5;">160</span><span style="color:#D73A49;">px</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#24292E;">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">.main</span><span style="color:#24292E;"> {}</span></span>
<span class="line"><span style="color:#24292E;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div></li></ul></li></ul><h2 id="_8-全局注册vue-countup-v2组件" tabindex="-1">8. 全局注册vue-countup-v2组件 <a class="header-anchor" href="#_8-全局注册vue-countup-v2组件" aria-label="Permalink to &quot;8. 全局注册vue-countup-v2组件&quot;">​</a></h2><ul><li>先安装countup和vue-countup-v2</li><li>封装组件</li></ul><div class="language-html vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">&lt;</span><span style="color:#85E89D;">template</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">    &lt;</span><span style="color:#85E89D;">i-count-up</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">class</span><span style="color:#E1E4E8;">=</span><span style="color:#9ECBFF;">&quot;counter&quot;</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">:endVal</span><span style="color:#E1E4E8;">=</span><span style="color:#9ECBFF;">&quot;count&quot;</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">:options</span><span style="color:#E1E4E8;">=</span><span style="color:#9ECBFF;">&quot;options&quot;</span><span style="color:#E1E4E8;">&gt;&lt;/</span><span style="color:#85E89D;">i-count-up</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">&lt;/</span><span style="color:#85E89D;">template</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">&lt;</span><span style="color:#85E89D;">script</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> ICountUp </span><span style="color:#F97583;">from</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;vue-countup-v2&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">export</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">default</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">    name: </span><span style="color:#9ECBFF;">&quot;testmap&quot;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">    components: {</span></span>
<span class="line"><span style="color:#E1E4E8;">        ICountUp</span></span>
<span class="line"><span style="color:#E1E4E8;">    },</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">    props: {</span></span>
<span class="line"><span style="color:#E1E4E8;">        count: {</span></span>
<span class="line"><span style="color:#E1E4E8;">            type: Number,</span></span>
<span class="line"><span style="color:#E1E4E8;">            default: </span><span style="color:#9ECBFF;">&quot;&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">        }</span></span>
<span class="line"><span style="color:#E1E4E8;">    },</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#B392F0;">data</span><span style="color:#E1E4E8;"> () {</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#F97583;">return</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">            options: {</span></span>
<span class="line"><span style="color:#E1E4E8;">              startVal: </span><span style="color:#79B8FF;">120</span><span style="color:#E1E4E8;">,  </span><span style="color:#6A737D;">// 动画开始数据</span></span>
<span class="line"><span style="color:#E1E4E8;">              duration: </span><span style="color:#79B8FF;">2</span><span style="color:#E1E4E8;">,  </span><span style="color:#6A737D;">// 动画持续时间</span></span>
<span class="line"><span style="color:#E1E4E8;">              useEasing: </span><span style="color:#79B8FF;">false</span><span style="color:#E1E4E8;">,  </span><span style="color:#6A737D;">// 是否禁用easing动画效果</span></span>
<span class="line"><span style="color:#E1E4E8;">              useGrouping: </span><span style="color:#79B8FF;">true</span><span style="color:#E1E4E8;">,  </span><span style="color:#6A737D;">// 是否使用分组，分组后每三位会用一个符号分隔</span></span>
<span class="line"><span style="color:#E1E4E8;">              separator: </span><span style="color:#9ECBFF;">&#39;,&#39;</span><span style="color:#E1E4E8;">,  </span><span style="color:#6A737D;">// 分组符号</span></span>
<span class="line"><span style="color:#E1E4E8;">              decimal: </span><span style="color:#9ECBFF;">&#39;.&#39;</span><span style="color:#E1E4E8;">,  </span><span style="color:#6A737D;">// 分隔整数和小数的符号，默认是小数点</span></span>
<span class="line"><span style="color:#E1E4E8;">              prefix: </span><span style="color:#9ECBFF;">&#39;&#39;</span><span style="color:#E1E4E8;">,  </span><span style="color:#6A737D;">// 前面添加</span></span>
<span class="line"><span style="color:#E1E4E8;">              suffix: </span><span style="color:#9ECBFF;">&#39;&#39;</span><span style="color:#E1E4E8;">  </span><span style="color:#6A737D;">// 后面添加</span></span>
<span class="line"><span style="color:#E1E4E8;">          },</span></span>
<span class="line"><span style="color:#E1E4E8;">        }</span></span>
<span class="line"><span style="color:#E1E4E8;">    },</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span>
<span class="line"><span style="color:#E1E4E8;">&lt;/</span><span style="color:#85E89D;">script</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">&lt;</span><span style="color:#85E89D;">style</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">lang</span><span style="color:#E1E4E8;">=</span><span style="color:#9ECBFF;">&quot;less&quot;</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">scoped</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#B392F0;">.counter</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#79B8FF;">display</span><span style="color:#E1E4E8;">: </span><span style="color:#79B8FF;">block</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span>
<span class="line"><span style="color:#E1E4E8;">&lt;/</span><span style="color:#85E89D;">style</span><span style="color:#E1E4E8;">&gt;</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">&lt;</span><span style="color:#22863A;">template</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"><span style="color:#24292E;">    &lt;</span><span style="color:#22863A;">i-count-up</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">class</span><span style="color:#24292E;">=</span><span style="color:#032F62;">&quot;counter&quot;</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">:endVal</span><span style="color:#24292E;">=</span><span style="color:#032F62;">&quot;count&quot;</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">:options</span><span style="color:#24292E;">=</span><span style="color:#032F62;">&quot;options&quot;</span><span style="color:#24292E;">&gt;&lt;/</span><span style="color:#22863A;">i-count-up</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"><span style="color:#24292E;">&lt;/</span><span style="color:#22863A;">template</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">&lt;</span><span style="color:#22863A;">script</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"><span style="color:#D73A49;">import</span><span style="color:#24292E;"> ICountUp </span><span style="color:#D73A49;">from</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;vue-countup-v2&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;">export</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">default</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">    name: </span><span style="color:#032F62;">&quot;testmap&quot;</span><span style="color:#24292E;">,</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">    components: {</span></span>
<span class="line"><span style="color:#24292E;">        ICountUp</span></span>
<span class="line"><span style="color:#24292E;">    },</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">    props: {</span></span>
<span class="line"><span style="color:#24292E;">        count: {</span></span>
<span class="line"><span style="color:#24292E;">            type: Number,</span></span>
<span class="line"><span style="color:#24292E;">            default: </span><span style="color:#032F62;">&quot;&quot;</span></span>
<span class="line"><span style="color:#24292E;">        }</span></span>
<span class="line"><span style="color:#24292E;">    },</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6F42C1;">data</span><span style="color:#24292E;"> () {</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#D73A49;">return</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">            options: {</span></span>
<span class="line"><span style="color:#24292E;">              startVal: </span><span style="color:#005CC5;">120</span><span style="color:#24292E;">,  </span><span style="color:#6A737D;">// 动画开始数据</span></span>
<span class="line"><span style="color:#24292E;">              duration: </span><span style="color:#005CC5;">2</span><span style="color:#24292E;">,  </span><span style="color:#6A737D;">// 动画持续时间</span></span>
<span class="line"><span style="color:#24292E;">              useEasing: </span><span style="color:#005CC5;">false</span><span style="color:#24292E;">,  </span><span style="color:#6A737D;">// 是否禁用easing动画效果</span></span>
<span class="line"><span style="color:#24292E;">              useGrouping: </span><span style="color:#005CC5;">true</span><span style="color:#24292E;">,  </span><span style="color:#6A737D;">// 是否使用分组，分组后每三位会用一个符号分隔</span></span>
<span class="line"><span style="color:#24292E;">              separator: </span><span style="color:#032F62;">&#39;,&#39;</span><span style="color:#24292E;">,  </span><span style="color:#6A737D;">// 分组符号</span></span>
<span class="line"><span style="color:#24292E;">              decimal: </span><span style="color:#032F62;">&#39;.&#39;</span><span style="color:#24292E;">,  </span><span style="color:#6A737D;">// 分隔整数和小数的符号，默认是小数点</span></span>
<span class="line"><span style="color:#24292E;">              prefix: </span><span style="color:#032F62;">&#39;&#39;</span><span style="color:#24292E;">,  </span><span style="color:#6A737D;">// 前面添加</span></span>
<span class="line"><span style="color:#24292E;">              suffix: </span><span style="color:#032F62;">&#39;&#39;</span><span style="color:#24292E;">  </span><span style="color:#6A737D;">// 后面添加</span></span>
<span class="line"><span style="color:#24292E;">          },</span></span>
<span class="line"><span style="color:#24292E;">        }</span></span>
<span class="line"><span style="color:#24292E;">    },</span></span>
<span class="line"><span style="color:#24292E;">}</span></span>
<span class="line"><span style="color:#24292E;">&lt;/</span><span style="color:#22863A;">script</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">&lt;</span><span style="color:#22863A;">style</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">lang</span><span style="color:#24292E;">=</span><span style="color:#032F62;">&quot;less&quot;</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">scoped</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"><span style="color:#6F42C1;">.counter</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#005CC5;">display</span><span style="color:#24292E;">: </span><span style="color:#005CC5;">block</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#24292E;">}</span></span>
<span class="line"><span style="color:#24292E;">&lt;/</span><span style="color:#22863A;">style</span><span style="color:#24292E;">&gt;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br></div></div><ul><li>main.js</li></ul><div class="language-js vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;countup&#39;</span></span>
<span class="line"><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> CountUp </span><span style="color:#F97583;">from</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;./components/tools/CountUp&#39;</span></span>
<span class="line"><span style="color:#E1E4E8;">Vue.</span><span style="color:#B392F0;">component</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;CountUp&quot;</span><span style="color:#E1E4E8;">, CountUp);</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">import</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;countup&#39;</span></span>
<span class="line"><span style="color:#D73A49;">import</span><span style="color:#24292E;"> CountUp </span><span style="color:#D73A49;">from</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;./components/tools/CountUp&#39;</span></span>
<span class="line"><span style="color:#24292E;">Vue.</span><span style="color:#6F42C1;">component</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;CountUp&quot;</span><span style="color:#24292E;">, CountUp);</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><ul><li>vue组件使用</li></ul><div class="language-html vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">&lt;</span><span style="color:#85E89D;">count-up</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">:count</span><span style="color:#E1E4E8;">=</span><span style="color:#9ECBFF;">&quot;123123&quot;</span><span style="color:#E1E4E8;"> /&gt;</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">&lt;</span><span style="color:#22863A;">count-up</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">:count</span><span style="color:#24292E;">=</span><span style="color:#032F62;">&quot;123123&quot;</span><span style="color:#24292E;"> /&gt;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><h2 id="_9-在vue-config-js中获取文件名" tabindex="-1">9. 在vue.config.js中获取文件名 <a class="header-anchor" href="#_9-在vue-config-js中获取文件名" aria-label="Permalink to &quot;9. 在vue.config.js中获取文件名&quot;">​</a></h2><ul><li>outputDir: __dirname.split(/[\\/]/).pop(),</li></ul><h2 id="_10-脚手架安装报错-sass" tabindex="-1">10. 脚手架安装报错（sass） <a class="header-anchor" href="#_10-脚手架安装报错-sass" aria-label="Permalink to &quot;10. 脚手架安装报错（sass）&quot;">​</a></h2><ul><li>报错信息：node-sass@5.0.0 postinstall: <code>node scripts/build.js</code><ul><li>npm uninstall node-sass</li><li>npm i node-sass --sass_binary_site=<a href="https://npm.taobao.org/mirrors/node-sass/" target="_blank" rel="noreferrer">https://npm.taobao.org/mirrors/node-sass/</a></li></ul></li></ul><h2 id="_11-前端一键自动部署工具" tabindex="-1">11. 前端一键自动部署工具 <a class="header-anchor" href="#_11-前端一键自动部署工具" aria-label="Permalink to &quot;11. 前端一键自动部署工具&quot;">​</a></h2><blockquote><p>deploy-cli-service</p></blockquote><ul><li>全局安装 <ul><li><code>npm install deploy-cli-service -g</code></li></ul></li><li>本地安装 <ul><li><code>npm install deploy-cli-service --save-dev</code></li></ul></li><li>查看版本，表示安装成功 <ul><li>deploy-cli-service -v</li><li>本地安装的在调用前需要加 npx</li><li>npx deploy-cli-service -v</li></ul></li><li>查看帮助 <ul><li>deploy-cli-service -h</li></ul></li><li>初始化配置文件(在项目目录下) <ul><li>deploy-cli-service init # 或者使用简写 deploy-cli-service i</li><li>根据提示填写内容，会在项目根目录下生成 deploy.config.js 文件，初始化配置只会生成 dev (开发环境)、test (测试环境)、prod (生产环境) 三个配置，再有其他配置可参考模板自行配置。</li><li>配置<div class="language-js vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#79B8FF;">module</span><span style="color:#E1E4E8;">.</span><span style="color:#79B8FF;">exports</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">  projectName: </span><span style="color:#9ECBFF;">&#39;vue_samples&#39;</span><span style="color:#E1E4E8;">, </span><span style="color:#6A737D;">// 项目名称</span></span>
<span class="line"><span style="color:#E1E4E8;">  privateKey: </span><span style="color:#9ECBFF;">&#39;/Users/fuchengwei/.ssh/id_rsa&#39;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">  passphrase: </span><span style="color:#9ECBFF;">&#39;&#39;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">  dev: {</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;">// 环境对象</span></span>
<span class="line"><span style="color:#E1E4E8;">    name: </span><span style="color:#9ECBFF;">&#39;开发环境&#39;</span><span style="color:#E1E4E8;">, </span><span style="color:#6A737D;">// 环境名称</span></span>
<span class="line"><span style="color:#E1E4E8;">    script: </span><span style="color:#9ECBFF;">&#39;npm run build&#39;</span><span style="color:#E1E4E8;">, </span><span style="color:#6A737D;">// 打包命令</span></span>
<span class="line"><span style="color:#E1E4E8;">    host: </span><span style="color:#9ECBFF;">&#39;192.168.0.1&#39;</span><span style="color:#E1E4E8;">, </span><span style="color:#6A737D;">// 服务器地址</span></span>
<span class="line"><span style="color:#E1E4E8;">    port: </span><span style="color:#79B8FF;">22</span><span style="color:#E1E4E8;">, </span><span style="color:#6A737D;">// 服务器端口号</span></span>
<span class="line"><span style="color:#E1E4E8;">    username: </span><span style="color:#9ECBFF;">&#39;root&#39;</span><span style="color:#E1E4E8;">, </span><span style="color:#6A737D;">// 服务器登录用户名</span></span>
<span class="line"><span style="color:#E1E4E8;">    password: </span><span style="color:#9ECBFF;">&#39;123456&#39;</span><span style="color:#E1E4E8;">, </span><span style="color:#6A737D;">// 服务器登录密码</span></span>
<span class="line"><span style="color:#E1E4E8;">    distPath: </span><span style="color:#9ECBFF;">&#39;dist&#39;</span><span style="color:#E1E4E8;">, </span><span style="color:#6A737D;">// 本地打包生成目录</span></span>
<span class="line"><span style="color:#E1E4E8;">    webDir: </span><span style="color:#9ECBFF;">&#39;/usr/local/nginx/html&#39;</span><span style="color:#E1E4E8;">, </span><span style="color:#6A737D;">// 服务器部署路径（不可为空或&#39;/&#39;）</span></span>
<span class="line"><span style="color:#E1E4E8;">    isRemoveRemoteFile: </span><span style="color:#79B8FF;">true</span><span style="color:#E1E4E8;"> </span><span style="color:#6A737D;">// 是否删除远程文件（默认true）</span></span>
<span class="line"><span style="color:#E1E4E8;">  },</span></span>
<span class="line"><span style="color:#E1E4E8;">  test: {</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;">// 环境对象</span></span>
<span class="line"><span style="color:#E1E4E8;">    name: </span><span style="color:#9ECBFF;">&#39;测试环境&#39;</span><span style="color:#E1E4E8;">, </span><span style="color:#6A737D;">// 环境名称</span></span>
<span class="line"><span style="color:#E1E4E8;">    script: </span><span style="color:#9ECBFF;">&#39;npm run build:test&#39;</span><span style="color:#E1E4E8;">, </span><span style="color:#6A737D;">// 打包命令</span></span>
<span class="line"><span style="color:#E1E4E8;">    host: </span><span style="color:#9ECBFF;">&#39;192.168.0.1&#39;</span><span style="color:#E1E4E8;">, </span><span style="color:#6A737D;">// 服务器地址</span></span>
<span class="line"><span style="color:#E1E4E8;">    port: </span><span style="color:#79B8FF;">22</span><span style="color:#E1E4E8;">, </span><span style="color:#6A737D;">// 服务器端口号</span></span>
<span class="line"><span style="color:#E1E4E8;">    username: </span><span style="color:#9ECBFF;">&#39;root&#39;</span><span style="color:#E1E4E8;">, </span><span style="color:#6A737D;">// 服务器登录用户名</span></span>
<span class="line"><span style="color:#E1E4E8;">    password: </span><span style="color:#9ECBFF;">&#39;123456&#39;</span><span style="color:#E1E4E8;">, </span><span style="color:#6A737D;">// 服务器登录密码</span></span>
<span class="line"><span style="color:#E1E4E8;">    distPath: </span><span style="color:#9ECBFF;">&#39;dist&#39;</span><span style="color:#E1E4E8;">, </span><span style="color:#6A737D;">// 本地打包生成目录</span></span>
<span class="line"><span style="color:#E1E4E8;">    webDir: </span><span style="color:#9ECBFF;">&#39;/usr/local/nginx/html&#39;</span><span style="color:#E1E4E8;">, </span><span style="color:#6A737D;">// 服务器部署路径（不可为空或&#39;/&#39;）</span></span>
<span class="line"><span style="color:#E1E4E8;">    isRemoveRemoteFile: </span><span style="color:#79B8FF;">true</span><span style="color:#E1E4E8;"> </span><span style="color:#6A737D;">// 是否删除远程文件（默认true）</span></span>
<span class="line"><span style="color:#E1E4E8;">  },</span></span>
<span class="line"><span style="color:#E1E4E8;">  prod: {</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;">// 环境对象</span></span>
<span class="line"><span style="color:#E1E4E8;">    name: </span><span style="color:#9ECBFF;">&#39;生产环境&#39;</span><span style="color:#E1E4E8;">, </span><span style="color:#6A737D;">// 环境名称</span></span>
<span class="line"><span style="color:#E1E4E8;">    script: </span><span style="color:#9ECBFF;">&#39;npm run build:prod&#39;</span><span style="color:#E1E4E8;">, </span><span style="color:#6A737D;">// 打包命令</span></span>
<span class="line"><span style="color:#E1E4E8;">    host: </span><span style="color:#9ECBFF;">&#39;192.168.0.1&#39;</span><span style="color:#E1E4E8;">, </span><span style="color:#6A737D;">// 服务器地址</span></span>
<span class="line"><span style="color:#E1E4E8;">    port: </span><span style="color:#79B8FF;">22</span><span style="color:#E1E4E8;">, </span><span style="color:#6A737D;">// 服务器端口号</span></span>
<span class="line"><span style="color:#E1E4E8;">    username: </span><span style="color:#9ECBFF;">&#39;root&#39;</span><span style="color:#E1E4E8;">, </span><span style="color:#6A737D;">// 服务器登录用户名</span></span>
<span class="line"><span style="color:#E1E4E8;">    password: </span><span style="color:#9ECBFF;">&#39;123456&#39;</span><span style="color:#E1E4E8;">, </span><span style="color:#6A737D;">// 服务器登录密码</span></span>
<span class="line"><span style="color:#E1E4E8;">    distPath: </span><span style="color:#9ECBFF;">&#39;dist&#39;</span><span style="color:#E1E4E8;">, </span><span style="color:#6A737D;">// 本地打包生成目录</span></span>
<span class="line"><span style="color:#E1E4E8;">    webDir: </span><span style="color:#9ECBFF;">&#39;/usr/local/nginx/html&#39;</span><span style="color:#E1E4E8;">, </span><span style="color:#6A737D;">// 服务器部署路径（不可为空或&#39;/&#39;）</span></span>
<span class="line"><span style="color:#E1E4E8;">    isRemoveRemoteFile: </span><span style="color:#79B8FF;">true</span><span style="color:#E1E4E8;"> </span><span style="color:#6A737D;">// 是否删除远程文件（默认true）</span></span>
<span class="line"><span style="color:#E1E4E8;">  }</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#005CC5;">module</span><span style="color:#24292E;">.</span><span style="color:#005CC5;">exports</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">  projectName: </span><span style="color:#032F62;">&#39;vue_samples&#39;</span><span style="color:#24292E;">, </span><span style="color:#6A737D;">// 项目名称</span></span>
<span class="line"><span style="color:#24292E;">  privateKey: </span><span style="color:#032F62;">&#39;/Users/fuchengwei/.ssh/id_rsa&#39;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">  passphrase: </span><span style="color:#032F62;">&#39;&#39;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">  dev: {</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6A737D;">// 环境对象</span></span>
<span class="line"><span style="color:#24292E;">    name: </span><span style="color:#032F62;">&#39;开发环境&#39;</span><span style="color:#24292E;">, </span><span style="color:#6A737D;">// 环境名称</span></span>
<span class="line"><span style="color:#24292E;">    script: </span><span style="color:#032F62;">&#39;npm run build&#39;</span><span style="color:#24292E;">, </span><span style="color:#6A737D;">// 打包命令</span></span>
<span class="line"><span style="color:#24292E;">    host: </span><span style="color:#032F62;">&#39;192.168.0.1&#39;</span><span style="color:#24292E;">, </span><span style="color:#6A737D;">// 服务器地址</span></span>
<span class="line"><span style="color:#24292E;">    port: </span><span style="color:#005CC5;">22</span><span style="color:#24292E;">, </span><span style="color:#6A737D;">// 服务器端口号</span></span>
<span class="line"><span style="color:#24292E;">    username: </span><span style="color:#032F62;">&#39;root&#39;</span><span style="color:#24292E;">, </span><span style="color:#6A737D;">// 服务器登录用户名</span></span>
<span class="line"><span style="color:#24292E;">    password: </span><span style="color:#032F62;">&#39;123456&#39;</span><span style="color:#24292E;">, </span><span style="color:#6A737D;">// 服务器登录密码</span></span>
<span class="line"><span style="color:#24292E;">    distPath: </span><span style="color:#032F62;">&#39;dist&#39;</span><span style="color:#24292E;">, </span><span style="color:#6A737D;">// 本地打包生成目录</span></span>
<span class="line"><span style="color:#24292E;">    webDir: </span><span style="color:#032F62;">&#39;/usr/local/nginx/html&#39;</span><span style="color:#24292E;">, </span><span style="color:#6A737D;">// 服务器部署路径（不可为空或&#39;/&#39;）</span></span>
<span class="line"><span style="color:#24292E;">    isRemoveRemoteFile: </span><span style="color:#005CC5;">true</span><span style="color:#24292E;"> </span><span style="color:#6A737D;">// 是否删除远程文件（默认true）</span></span>
<span class="line"><span style="color:#24292E;">  },</span></span>
<span class="line"><span style="color:#24292E;">  test: {</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6A737D;">// 环境对象</span></span>
<span class="line"><span style="color:#24292E;">    name: </span><span style="color:#032F62;">&#39;测试环境&#39;</span><span style="color:#24292E;">, </span><span style="color:#6A737D;">// 环境名称</span></span>
<span class="line"><span style="color:#24292E;">    script: </span><span style="color:#032F62;">&#39;npm run build:test&#39;</span><span style="color:#24292E;">, </span><span style="color:#6A737D;">// 打包命令</span></span>
<span class="line"><span style="color:#24292E;">    host: </span><span style="color:#032F62;">&#39;192.168.0.1&#39;</span><span style="color:#24292E;">, </span><span style="color:#6A737D;">// 服务器地址</span></span>
<span class="line"><span style="color:#24292E;">    port: </span><span style="color:#005CC5;">22</span><span style="color:#24292E;">, </span><span style="color:#6A737D;">// 服务器端口号</span></span>
<span class="line"><span style="color:#24292E;">    username: </span><span style="color:#032F62;">&#39;root&#39;</span><span style="color:#24292E;">, </span><span style="color:#6A737D;">// 服务器登录用户名</span></span>
<span class="line"><span style="color:#24292E;">    password: </span><span style="color:#032F62;">&#39;123456&#39;</span><span style="color:#24292E;">, </span><span style="color:#6A737D;">// 服务器登录密码</span></span>
<span class="line"><span style="color:#24292E;">    distPath: </span><span style="color:#032F62;">&#39;dist&#39;</span><span style="color:#24292E;">, </span><span style="color:#6A737D;">// 本地打包生成目录</span></span>
<span class="line"><span style="color:#24292E;">    webDir: </span><span style="color:#032F62;">&#39;/usr/local/nginx/html&#39;</span><span style="color:#24292E;">, </span><span style="color:#6A737D;">// 服务器部署路径（不可为空或&#39;/&#39;）</span></span>
<span class="line"><span style="color:#24292E;">    isRemoveRemoteFile: </span><span style="color:#005CC5;">true</span><span style="color:#24292E;"> </span><span style="color:#6A737D;">// 是否删除远程文件（默认true）</span></span>
<span class="line"><span style="color:#24292E;">  },</span></span>
<span class="line"><span style="color:#24292E;">  prod: {</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6A737D;">// 环境对象</span></span>
<span class="line"><span style="color:#24292E;">    name: </span><span style="color:#032F62;">&#39;生产环境&#39;</span><span style="color:#24292E;">, </span><span style="color:#6A737D;">// 环境名称</span></span>
<span class="line"><span style="color:#24292E;">    script: </span><span style="color:#032F62;">&#39;npm run build:prod&#39;</span><span style="color:#24292E;">, </span><span style="color:#6A737D;">// 打包命令</span></span>
<span class="line"><span style="color:#24292E;">    host: </span><span style="color:#032F62;">&#39;192.168.0.1&#39;</span><span style="color:#24292E;">, </span><span style="color:#6A737D;">// 服务器地址</span></span>
<span class="line"><span style="color:#24292E;">    port: </span><span style="color:#005CC5;">22</span><span style="color:#24292E;">, </span><span style="color:#6A737D;">// 服务器端口号</span></span>
<span class="line"><span style="color:#24292E;">    username: </span><span style="color:#032F62;">&#39;root&#39;</span><span style="color:#24292E;">, </span><span style="color:#6A737D;">// 服务器登录用户名</span></span>
<span class="line"><span style="color:#24292E;">    password: </span><span style="color:#032F62;">&#39;123456&#39;</span><span style="color:#24292E;">, </span><span style="color:#6A737D;">// 服务器登录密码</span></span>
<span class="line"><span style="color:#24292E;">    distPath: </span><span style="color:#032F62;">&#39;dist&#39;</span><span style="color:#24292E;">, </span><span style="color:#6A737D;">// 本地打包生成目录</span></span>
<span class="line"><span style="color:#24292E;">    webDir: </span><span style="color:#032F62;">&#39;/usr/local/nginx/html&#39;</span><span style="color:#24292E;">, </span><span style="color:#6A737D;">// 服务器部署路径（不可为空或&#39;/&#39;）</span></span>
<span class="line"><span style="color:#24292E;">    isRemoveRemoteFile: </span><span style="color:#005CC5;">true</span><span style="color:#24292E;"> </span><span style="color:#6A737D;">// 是否删除远程文件（默认true）</span></span>
<span class="line"><span style="color:#24292E;">  }</span></span>
<span class="line"><span style="color:#24292E;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br></div></div></li></ul></li><li>部署 <ul><li>命令后面需要加 --mode 环境对象</li></ul><div class="language-js vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#9ECBFF;">&quot;scripts&quot;</span><span style="color:#E1E4E8;">: {</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#9ECBFF;">&quot;serve&quot;</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">&quot;vue-cli-service serve&quot;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#9ECBFF;">&quot;build&quot;</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">&quot;vue-cli-service build&quot;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">......</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#9ECBFF;">&quot;deploy:dev&quot;</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">&quot;deploy-cli-service deploy --mode dev&quot;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#9ECBFF;">&quot;deploy:test&quot;</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">&quot;deploy-cli-service deploy --mode test&quot;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#9ECBFF;">&quot;deploy:prod&quot;</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">&quot;deploy-cli-service deploy --mode prod&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#032F62;">&quot;scripts&quot;</span><span style="color:#24292E;">: {</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#032F62;">&quot;serve&quot;</span><span style="color:#24292E;">: </span><span style="color:#032F62;">&quot;vue-cli-service serve&quot;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#032F62;">&quot;build&quot;</span><span style="color:#24292E;">: </span><span style="color:#032F62;">&quot;vue-cli-service build&quot;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#D73A49;">......</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#032F62;">&quot;deploy:dev&quot;</span><span style="color:#24292E;">: </span><span style="color:#032F62;">&quot;deploy-cli-service deploy --mode dev&quot;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#032F62;">&quot;deploy:test&quot;</span><span style="color:#24292E;">: </span><span style="color:#032F62;">&quot;deploy-cli-service deploy --mode test&quot;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#032F62;">&quot;deploy:prod&quot;</span><span style="color:#24292E;">: </span><span style="color:#032F62;">&quot;deploy-cli-service deploy --mode prod&quot;</span></span>
<span class="line"><span style="color:#24292E;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div></li></ul>`,31),e=[o];function r(c,t,E,y,i,u){return n(),a("div",null,e)}const m=s(p,[["render",r]]);export{F as __pageData,m as default};
